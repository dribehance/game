angular.module("Game",["ngRoute","ngSanitize","LocalStorageModule","timer","ngPinchZoom"]).config(["$routeProvider","$httpProvider","$locationProvider","localStorageServiceProvider","config",function(e,t,n,o,a){angular.forEach(a.interceptor,function(t){var n=t.replace(/_[a-z]/g,function(e){return e.split("_")[1].toUpperCase()});n+="Controller",e.when("/"+t,{templateUrl:"templates/"+t+".html",reloadOnSearch:!1,controller:n,resolve:{user:["$q","$location","localStorageService",function(e,n,o){var a=["account"],r=e.defer();return a.includes(t)&&!o.get("token")?(r.reject(),n.path("/signin").replace(),void 0):(r.resolve(),r.promise)}]}})}),e.otherwise("/index"),t.defaults.useXDomain=!0,t.defaults.withCredentials=!0,delete t.defaults.headers.common["X-Requested-With"],o.setStorageCookie(.02),t.interceptors.push("tokenInterceptor")}]).run(["appServices",function(e){e.init()}]),angular.module("Game").factory("utilServices",["$q",function(e){var t=function(e){var t;t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]);for(var n=e.split(",")[0].split(":")[1].split(";")[0],o=new Uint8Array(t.length),a=0;a<t.length;a++)o[a]=t.charCodeAt(a);return new Blob([o],{type:n})},n=function(n){var o=e.defer(),a=document.createElement("img");try{var r=new FileReader;r.onload=function(e){a.src=e.target.result;var n=document.createElement("canvas"),r=n.getContext("2d");r.drawImage(a,0,0);var i=500,s=500,u=a.width,c=a.height;u>c?u>i&&(c*=i/u,u=i):c>s&&(u*=s/c,c=s),n.width=u,n.height=c;var r=n.getContext("2d");r.drawImage(a,0,0,u,c);var l=n.toDataURL("image/jpeg"),g=t(l);o.resolve(g)},r.readAsDataURL(n)}catch(i){o.resolve(i)}return o.promise};return{resizeFile:n}}]),angular.module("Game").factory("userServices",["$rootScope","$http","apiServices","localStorageService","config",function(e,t,n,o,a){return{rsa_key:n._get(angular.extend({},a.common_params,{url:"key/private_key.pem"})),signin:n._get(angular.extend({},a.common_params,{url:a.url+"/app/UserCenter/Login"})),signup:n._get(angular.extend({},a.common_params,{url:a.url+"/app/UserCenter/RegistTel"})),forget:n._get(angular.extend({},a.common_params,{url:a.url+"/app/UserCenter/ResetPassword"})),modify_password:n._get(angular.extend({},a.common_params,{url:a.url+"/app/UserCenter/SetPassword",token:o.get("token")})),modify_trade_password:n._get(angular.extend({},a.common_params,{url:a.url+"/app/UserCenter/setTradePassword",token:o.get("token")})),reset:n._get(angular.extend({},a.common_params,{url:a.url+"api_url"})),get_smscode:n._get(angular.extend({},a.common_params,{url:a.url+"api_url"})),query_basicinfo:n._get(angular.extend({},a.common_params,{url:a.url+"/app/UserCenter/userBaseInfo",token:o.get("token")})),sync:function(){var t=this;t.query_basicinfo().then(function(n){n.code==a.request.SUCCESS&&n.status==a.response.SUCCESS?(e.user=void 0,e.user=angular.extend({},e.user,n.Result.UserInfo)):t.logout()})},logout:function(){e.user={},o.remove("token")},realname_authen:n._get(angular.extend({},a.common_params,{url:a.url+"api_url",token:o.get("token")})),phone_authen:n._get(angular.extend({},a.common_params,{url:a.url+"api_url",token:o.get("token")})),query_feiting:n._get(angular.extend({},a.common_params,{url:a.url+"/app/XyftManage/xyftOut",token:o.get("token")})),query_feiting_history:n._get(angular.extend({},a.common_params,{url:a.url+"/app/XyftManage/xyftList",token:o.get("token")})),query_peilv:n._get(angular.extend({},a.common_params,{url:a.url+"/app/XyftManage/oddsList",cache:!0})),betting:n._get(angular.extend({},a.common_params,{url:a.url+"/app/XyftManage/buyGame",token:o.get("token")})),query_saiche:n._get(angular.extend({},a.common_params,{url:a.url+"/app/BjpksManage/bjpksOut",token:o.get("token")})),query_saiche_history:n._get(angular.extend({},a.common_params,{url:a.url+"/app/BjpksManage/bjpksList",token:o.get("token")})),query_kuaile:n._get(angular.extend({},a.common_params,{url:a.url+"/app/Gdkl10Manage/gdkl10Out",token:o.get("token")})),query_kuaile_history:n._get(angular.extend({},a.common_params,{url:a.url+"/app/Gdkl10Manage/gdkl10List",token:o.get("token")})),query_kuaile_peilv:n._get(angular.extend({},a.common_params,{url:a.url+"/app/Gdkl10Manage/oddsGdkl10List",cache:!0})),betting_kuaile:n._get(angular.extend({},a.common_params,{url:a.url+"/app/Gdkl10Manage/buyGdkl10Game",token:o.get("token")})),query_liuhecai:n._get(angular.extend({},a.common_params,{url:a.url+"/app/XglhcManage/xglhcOut",token:o.get("token")})),query_liuhecai_history:n._get(angular.extend({},a.common_params,{url:a.url+"/app/XglhcManage/xglhcList",token:o.get("token")})),query_liuhecai_peilv:n._get(angular.extend({},a.common_params,{url:a.url+"/app/XglhcManage/oddsXglhcList",cache:!0})),betting_liuhecai:n._get(angular.extend({},a.common_params,{url:a.url+"/app/XglhcManage/buyXglhcGame",token:o.get("token")})),query_messages:n._get(angular.extend({},a.common_params,{url:a.url+"/app/UserCenterApp/myInformationList",token:o.get("token")})),query_message_by_id:n._get(angular.extend({},a.common_params,{url:a.url+"api_url",token:o.get("token")})),query_constant_info:n._get(angular.extend({},a.common_params,{url:a.url+"/app/UserCenter/baseInfo",token:o.get("token")})),charge:n._get(angular.extend({},a.common_params,{url:a.url+"/app/ChargeLogs/chargeMoney",token:o.get("token")})),withdraw:n._get(angular.extend({},a.common_params,{url:a.url+"/app/ChargeLogs/getMoney",token:o.get("token")})),query_bills:n._get(angular.extend({},a.common_params,{url:a.url+"/app/UserCenter/fundList",token:o.get("token")})),query_recommandors:n._get(angular.extend({},a.common_params,{url:a.url+"/app/UserCenter/recommendList",token:o.get("token")})),query_orders:n._get(angular.extend({},a.common_params,{url:a.url+"/app/UserCenter/buyGameLogList",token:o.get("token")}))}}]),angular.module("Game").factory("tokenInterceptor",["$location","$q","$timeout","localStorageService","errorServices","config",function(e,t,n,o,a,r){return{request:function(e){return e},requestError:function(){},response:function(i){var s=t.defer();return i.config.url.indexOf(".html")>0?i:i.data.code==r.request.TOKEN_INVALID?(console.log("TOKEN_INVALID"),o.remove("token"),a.autoHide("请先登录"),n(function(){e.path("/signin").replace()},500),s.promise):i},responseError:function(e){var n=t.defer();return a.requestError(e.data,e.status,e.headers,e.config),n.promise}}}]),angular.module("Game").factory("toastServices",function(){return{show:function(){$(".toast").show()},hide:function(){$(".toast").hide()},start:function(){NProgress.start()},done:function(){NProgress.done()}}}),angular.module("Game").factory("gameServices",["$rootScope","$http","apiServices","localStorageService","config",function(e,t,n,o,a){return{query_banner:n._get(angular.extend({},a.common_params,{url:a.url+"/app/IndexBannerManage/homeBanner",cache:!0})),query_banner_by_id:n._get(angular.extend({},a.common_params,{url:a.url+"/app/IndexBannerManage/indexBannerDetail",cache:!0})),query_image_group:n._get(angular.extend({},a.common_params,{url:a.url+"/app/IndexBannerManage/colorImageList",cache:!0}))}}]),angular.module("Game").factory("gameExternalServices",["$rootScope","$q","$http","userServices","apiServices","localStorageService","config",function($rootScope,$q,$http,userServices,apiServices,localStorageService,config){return{config:function(e){var t=this,n=["北京赛车","幸运飞艇"],o=["冠军","亚军","季军"],a=["单","双","大","小"],r=[],i=0,s=$q.defer();return angular.forEach(n,function(n){angular.forEach(o,function(o){angular.forEach(a,function(a){++i,t.query_trend_by_type(n,o,a,e).then(function(t){r.push({game:n,type:o,betting_type:a,repeat_time:e,data:t}),--i,console.log("config..."),0==i&&(console.log("config ok"),$rootScope.$emit("config:ok",r))})})})}),$rootScope.$on("config:ok",function(e,t){var n=t.sort(function(e,t){return console.log(e.data.length<t.data.length),e.data.length<t.data.length?1:e.data.length>t.data.length?-1:0});s.resolve(n)}),s.promise},auto_betting:function(){},query_gains_from_time:function(game,type,betting_type,time){return userServices.query_orders({pn:1,page_size:1e3}).then(function(data){if(data.code==config.request.SUCCESS&&data.status==config.response.SUCCESS){var orders=data.Result.BuyGameLogList.list,gain=eval(orders.filter(function(e){return e.game_name==game&&e.type_name_01==type&&e.type_name_02==betting_type&&e.post_time>time}).map(function(e){return e.backmoney}).join("+"));return gain||0}errorServices.autoHide(data.message)})},query_trend_by_type:function(game,type,betting_type,repeat_time){var statistics=[],counter=0,temp=[],last,current,condition={"单":" % 2 != 0","双":" % 2 == 0","大":" > 5","小":" < 6"};return userServices.query_saiche_history({pn:1,page_size:1e3}).then(function(data){if(data.code==config.request.SUCCESS&&data.status==config.response.SUCCESS){var trends=data.Result.BjpksDataList.list;return angular.forEach(trends,function(trend,index){current=trend;var condition_str=current.n_01+condition[betting_type];return eval(condition_str)&&(current.open_type=betting_type),last&&current.open_type&&current.open_type==last.open_type?(temp.push(current),last=current,void 0):(temp.length>0&&statistics.push({name:"冠军连续"+betting_type,counter:temp.length,date:temp[temp.length-1].datelinedate,span:temp[temp.length-1].qishu+"-"+temp[0].qishu,data:temp}),last=current,temp=[current],void 0)}),statistics.filter(function(e){return e.counter>repeat_time-1})}errorServices.autoHide(data.message)})}}}]),angular.module("Game").factory("facebookServices",["$rootScope","$route","$http","$window","$location","$q","userServices","toastServices","errorServices","localStorageService","config",function(e,t,n,o,a,r,i,s,u,c,l){return o.fbAsyncInit=function(){var e=o.FB||void 0;e&&e.init({appId:"217442991983314",xfbml:!0,version:"v2.6"})},{share:function(e){var n=o.FB||void 0;n&&n.ui({method:"feed",link:e||l.share.link,redirect_uri:e||l.share.link,caption:l.share.title},function(){t.reload()})},login:function(){var e=r.defer(),t=this;return t._facebook_connected().then(function(e){return e}).then(function(){t._query_facebook_user_info().then(function(t){e.resolve(t)})}),e.promise},logout:function(){var e=o.FB||void 0;e&&e.logout(function(){})},_facebook_connected:function(){var e=r.defer(),t=o.FB||void 0;return t?(s.show(),t.login(function(t){s.hide(),"connected"==t.status?e.resolve(t):e.reject("_facebook_connected occured")},{scope:"public_profile,email"}),e.promise):void 0},_query_facebook_user_info:function(){var e=r.defer(),t=o.FB||void 0;return t?(t.api("/me",{fields:"id,email,name,picture,gender,last_name"},function(t){!t||t.error?e.reject("_query_facebook_user_info error occured"):e.resolve(t)}),e.promise):void 0}}}]),angular.module("Game").factory("errorServices",["$rootScope","$timeout","toastServices",function(e,t,n){return{show:function(t){e.error_msg=t,$(".error-msg").show()},hide:function(){e.error_msg="",$(".error-msg").hide()},autoHide:function(n){e.error_msg=n,$(".error-msg").show(),t(function(){e.error_msg="",$(".error-msg").hide()},3e3)},requestError:function(e,t,o,a){switch(n.hide(),t){case 0:this.autoHide("连接超时");break;case 500:case 501:case 502:case 503:case 504:case 505:case 506:case 507:case 509:case 510:this.autoHide("服务器连接出错")}console.log("onRequestError output status, data, headers, config"),console.log(t),console.log(e),console.log(o),console.log(a),console.log("onRequestError end")}}}]),angular.module("Game").factory("appServices",["$rootScope","$window","$location","userServices","localStorageService","errorServices","toastServices","config",function(e,t,n,o,a,r,i,s){var u=function(){},c=function(e,t,n){i.hide(),r.hide(),g(e,t,n)},l=function(){},g=function(){};return{init:function(){e.$on("$routeChangeStart",u),e.$on("$routeChangeSuccess",c),e.$on("$routeChangeError",l),e.go=function(e){n.path(e)},e.back=function(){t.history.back()},e.staticImageUrl=s.imageUrl,a.get("token")&&o.sync()}}}]),angular.module("Game").factory("apiServices",["$http","localStorageService",function(e,t){return{_get:function(n){return function(o){return void 0!==n.token&&(n.token=t.get("token")),e({url:n.url,method:"GET",cache:n.cache||!1,params:angular.extend({},n,o)}).then(function(e){return e.data})}},_post:function(n){return function(o){return void 0!==n.token&&(n.token=t.get("token")),e({url:n.url,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:function(e){var t=[];for(var n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")},data:angular.extend({},n,o)}).then(function(e){return e.data})}}}}]),angular.module("Game").directive("onRepeatDone",function(){return{restrict:"A",link:function(e,t){e.$last&&e.$emit("onRepeatDone",t)}}}),angular.module("Game").directive("onload",function(){return{restrict:"A",link:function(e,t){$(t).css({opacity:0}),$(t).bind("load",function(){$(t).css({opacity:1})})}}}),angular.module("Game").directive("mobilepicker",["$timeout",function(e){return{restrict:"E",scope:{options:"="},template:"<input type='text' name='picker' readonly ng-model='options.value'>",link:function(t,n){var o={beginyear:1950,endyear:(new Date).getFullYear(),days:["周日","周一","周二","周三","周四","周五","周六"],curdate:!1,theme:"date",event:"click",callBack:function(e){t.options.value=e.y+"-"+e.M+"-"+e.d}};e(function(){$(n).find("input").datePicker(angular.extend({},o,t.options))},0)}}}]),angular.module("Game").directive("imageview",["$timeout",function(e){return{restrict:"E",scope:{src:"="},controller:["$scope","$element","$attrs",function(t,n,o){function a(e){$(e.target).css({width:"auto",height:"auto"});var n=$(e.target),o=n.width(),a=n.height(),r=parseFloat(o)/parseFloat(a);r<t.rate?(o=t.width,a=t.width/r,n.css({display:"inline-block",height:a,width:o,"margin-top":-(a-t.height)/2})):(a=t.height,o=a*r,n.css({display:"inline-block",height:a,width:o,"margin-left":-(o-t.width)/2})),n.parent().css({background:"none"}),n.css({visibility:"visible"})}function r(e){var n=$(e.target),o=n.width(),a=n.height(),r=parseFloat(o)/parseFloat(a);r<t.rate?n.css({display:"inline-block",height:"100%",width:"auto"}):n.css({display:"inline-block",height:"auto",width:"100%"}),n.parent().css({background:"none"}),n.css({visibility:"visible"})}return t.bg_image="../images/default.png",t.rate=parseFloat(t.$eval(o.rate)),t.width=n.parent().width()||$(window).width(),t.height=t.width/t.rate,t.rate?(this.show_center_on_loaded=function(t){a(t),e(function(){a(t)},100)},this.show_on_loaded=function(t){r(t),e(function(){r(t)},100)},void 0):(console.log("unexpect rate"),void 0)}],template:function(e){var t="<img ng-src='{{src}}' show-center-on-loaded err-src='../images/default.png'>";return void 0==$(e).attr("center-only")&&(t="<img ng-src='{{src}}' show-on-loaded err-src='../images/default.png'>"),t},link:function(e,t){var n={display:"block",width:e.width,overflow:"hidden","text-align":"center","background-image":"url("+e.bg_image+")","background-position":"center center","background-repeat":"no-repeat",height:e.height,overflow:"hidden"};$(t).css(n)}}}]).directive("showOnLoaded",function(){return{restrict:"A",require:"^imageview",link:function(e,t,n,o){t.bind("load",o.show_on_loaded)}}}).directive("showCenterOnLoaded",function(){return{restrict:"A",require:"^imageview",link:function(e,t,n,o){t.bind("load",o.show_center_on_loaded)}}}),angular.module("Game").directive("dribehanceHeader",["$rootScope",function(e){return{restrict:"E",templateUrl:"templates/header.html",scope:{title:"=",backAction:"="},link:function(t){t.back=function(){e.back()}}}}]),angular.module("Game").directive("dribehanceFooter",function(){return{restrict:"E",templateUrl:"templates/footer.html",scope:{active:"="},link:function(){}}}),angular.module("Game").directive("errSrc",function(){return{restrict:"A",link:function(e,t,n){$(t).bind("error",function(){$(t).attr("src",n.errSrc)})}}}),angular.module("Game").directive("countdown",["$interval",function(e){return{restrict:"E",scope:{countdown:"=",disabled:"=countdownDisabled"},link:function(t,n){function o(){var n=t.countdown.message,o=parseFloat(t.countdown.count)?parseFloat(t.countdown.count):60;a=!0,t.$apply(function(){t.countdown.message=o--,t.countdown.message=o+"s重新获取",t.countdown.mode="disabled",t.countdown.reset=!1,t.countdown.callback()});var r=e(function(){t.countdown.message=o--,t.countdown.message=o+"s重新获取",(0>o||t.countdown.reset)&&(e.cancel(r),t.countdown.message=n,a=!1)},1e3)}var a=!1;$(n).bind("click",function(){t.disabled||a||o()})}}}]),angular.module("Game").directive("confirm",function(){return{restrict:"E",scope:{confirm:"="},templateUrl:"templates/confirm.html",link:function(e,t){e.confirm=angular.extend({},{title:"Tips",content:"Are You Sure?",content_type:"content",open:function(){$(t).show()},cancel:function(){$(t).hide(),"function"==typeof e.confirm.cancle_callback&&e.confirm.cancle_callback()},ok:function(){$(t).hide(),"function"==typeof e.confirm.ok_callback&&(e.confirm.ok_callback(),e.confirm.content_type="content")}},e.confirm)}}}),angular.module("Game").directive("banner",function(){return{restrict:"E",transclude:!0,template:"<div class='carousel-holder owl-carousel theme' ng-transclude></div>",link:function(e,t){var n={autoplay:!0,items:1};n=angular.extend({},n,e.$eval($(t).attr("data-options")));var o=parseFloat(e.$eval($(t).attr("data-rate"))),a={display:"block",width:$(t).parent().width()||$(window).width(),height:($(t).parent().width()||$(window).width())/o};$(t).css(a),e.$on("onRepeatDone",function(){$(t).find(".carousel-holder").owlCarousel(n)})}}}),angular.module("Game").controller("signupController",["$scope","$rootScope","$timeout","$location","userServices","errorServices","toastServices","localStorageService","config",function(e,t,n,o,a,r,i,s,u){e.input={},e.ajaxForm=function(){return e.input.password_1!=e.input.password_2?(r.autoHide("两次登录密码不一致"),void 0):e.input.password_3!=e.input.password_4?(r.autoHide("两次提现密码不一致"),void 0):(i.show(),a.signup({nickname:e.input.nickname,password:e.input.password_1,name:e.input.realname,telephone:e.input.telephone,trade_password:e.input.password_3,invited_code:e.input.code}).then(function(e){i.hide(),e.code==u.request.SUCCESS&&e.status==u.response.SUCCESS?(t.user=e.user,s.set("token",e.user.token),r.autoHide(e.message),n(function(){o.path("index").replace()},2e3)):r.autoHide(e.message)}),void 0)}}]),angular.module("Game").controller("signinController",["$scope","$rootScope","$timeout","$location","userServices","errorServices","toastServices","localStorageService","config",function(e,t,n,o,a,r,i,s,u){e.input={},e.ajaxForm=function(){i.show(),a.signin({nickname:e.input.nickname,password:e.input.password}).then(function(e){i.hide(),e.code==u.request.SUCCESS&&e.status==u.response.SUCCESS?(t.user=e.user,s.set("token",e.user.token),r.autoHide(e.message),n(function(){o.path("index").replace()},2e3)):r.autoHide(e.message)})}}]),angular.module("Game").controller("saicheController",["$scope","$route","$rootScope","$timeout","$interval","userServices","errorServices","toastServices","localStorageService","config",function(e,t,n,o,a,r,i,s,u,c){e.saiche={},e.saiche.waiting=!1,e.query_saiche=function(){r.query_saiche().then(function(t){return t.code==c.request.SUCCESS&&t.status==c.response.SUCCESS?e.saiche=t:i.autoHide(t.message),e.saiche.waiting?(o(function(){e.saiche.day_seconds="",e.query_saiche()},5e3),void 0):(e.reload_saiche_history(),void 0)})},e.query_saiche(),e.saiche_historys=[],e.page={pn:1,page_size:20,message:"点击加载更多"},e.loadMore=function(){e.no_more||(s.show(),e.page.message="正在加载...",r.query_saiche_history(e.page).then(function(t){s.hide(),e.page.message="点击加载更多",e.is_reload&&(e.saiche_historys=[],e.is_reload=!1),t.code==c.request.SUCCESS&&t.status==c.response.SUCCESS?(e.saiche_historys=e.saiche_historys.concat(t.Result.BjpksDataList.list),e.no_more=e.saiche_historys.length==t.Result.BjpksDataList.totalRow?!0:!1):i.autoHide("服务器错误"),e.no_more&&(e.page.message="没有了"),e.page.pn++}))},e.loadMore(),e.reload_saiche_history=function(){e.page={pn:1,page_size:20,message:"点击加载更多"},e.is_reload=!0,e.no_more=!1,e.loadMore()},e.callbackTimer={},e.callbackTimer.finished=function(){e.query_saiche()},e.refresh=function(){t.reload()}}]),angular.module("Game").controller("recommandorsController",["$scope","userServices","errorServices","toastServices","localStorageService","config",function(e,t,n,o,a,r){t.sync(),e.recommandors=[],e.page={pn:1,page_size:20,message:"点击加载更多"},e.loadMore=function(){e.no_more||(o.show(),e.page.message="正在加载...",t.query_recommandors(e.page).then(function(t){o.hide(),e.page.message="点击加载更多",t.code==r.request.SUCCESS&&t.status==r.response.SUCCESS?(e.recommandors=e.recommandors.concat(t.Result.RecommendList.list),e.no_more=e.recommandors.length==t.Result.RecommendList.totalRow?!0:!1,e.total_user=t.Result.RecommendList.totalRow):n.autoHide("服务器错误"),e.no_more&&(e.page.message="没有了"),e.page.pn++}))},e.loadMore()}]),angular.module("Game").controller("recommandIncomeController",["$scope","userServices","errorServices","toastServices","localStorageService","config",function(e,t,n,o,a,r){t.sync(),e.recommand_incomes=[],e.page={pn:1,page_size:20,message:"点击加载更多"},e.loadMore=function(){e.no_more||(o.show(),e.page.message="正在加载...",t.query_recommandors(e.page).then(function(t){o.hide(),e.page.message="点击加载更多",t.code==r.request.SUCCESS&&t.status==r.response.SUCCESS?(e.recommand_incomes=e.recommand_incomes.concat(t.Result.RecommendList.list),e.no_more=e.recommand_incomes.length==t.Result.RecommendList.totalRow?!0:!1,e.total_money=t.total_money):n.autoHide("服务器错误"),e.no_more&&(e.page.message="没有了"),e.page.pn++}))},e.loadMore()}]),angular.module("Game").controller("ordersController",["$scope","userServices","errorServices","toastServices","localStorageService","config",function(e,t,n,o,a,r){e.input={},e.show=function(t){e.show_order=t,e.popup_state="open"},e.close=function(){e.popup_state="close"},e.orders=[],e.page={pn:1,page_size:20,message:"点击加载更多"},e.loadMore=function(){e.no_more||(o.show(),e.page.message="正在加载...",t.query_orders(e.page).then(function(t){o.hide(),e.page.message="点击加载更多",t.code==r.request.SUCCESS&&t.status==r.response.SUCCESS?(e.orders=e.orders.concat(t.Result.BuyGameLogList.list),e.no_more=e.orders.length==t.Result.BuyGameLogList.totalRow?!0:!1):n.autoHide("服务器错误"),e.no_more&&(e.page.message="没有了"),e.page.pn++}))},e.loadMore()}]),angular.module("Game").controller("onlineWithdrawController",["$scope","$rootScope","$timeout","userServices","errorServices","toastServices","localStorageService","config",function(e,t,n,o,a,r,i,s){e.input={},r.show(),o.query_basicinfo().then(function(e){r.hide(),e.code==s.request.SUCCESS&&e.status==s.response.SUCCESS?t.user=angular.extend({},t.user,e.Result.UserInfo):a.autoHide(e.message)}),e.ajaxForm=function(){r.show(),o.withdraw({charge_account:e.input.account,account_name:e.input.pay_account,bank_name:e.input.bank_name,money:e.input.money,trade_password:e.input.password}).then(function(e){r.hide(),e.code==s.request.SUCCESS&&e.status==s.response.SUCCESS?(a.autoHide(e.message),n(function(){t.back()},2e3)):a.autoHide(e.message)})}}]),angular.module("Game").controller("onlineChargeController",["$scope","userServices","errorServices","toastServices","localStorageService","config",function(e,t,n,o,a,r){e.input={},e.input.type=1,o.show(),t.query_constant_info().then(function(t){o.hide(),t.code==r.request.SUCCESS&&t.status==r.response.SUCCESS?e.charge_info=t.Constant:n.autoHide(t.message)}),e.check=function(t){e.input.type=t},e.ajaxForm=function(){o.show(),t.charge({charge_account:e.input.pay_account,account_name:e.input.account,money:e.input.money,type:e.input.type}).then(function(t){o.hide(),t.code==r.request.SUCCESS&&t.status==r.response.SUCCESS?(n.autoHide(t.message),e.input.pay_account="",e.input.account="",e.input.money=""):n.autoHide(t.message)})}}]),angular.module("Game").controller("myCodeController",["$scope","userServices","errorServices","toastServices","localStorageService","config",function(e,t,n,o,a,r){t.sync(),o.show(),t.query_constant_info().then(function(t){o.hide(),t.code==r.request.SUCCESS&&t.status==r.response.SUCCESS?e.constant_info=t.Constant:n.autoHide(t.message)})}]),angular.module("Game").controller("modifyTradePasswordController",["$scope","$rootScope","$location","$timeout","userServices","errorServices","toastServices","localStorageService","config",function(e,t,n,o,a,r,i,s,u){e.input={},e.ajaxForm=function(){return e.password_1!=e.password_2?(r.autoHide("两次密码不一致"),void 0):(i.show(),a.modify_trade_password({old_trade_password:e.input.password,new_trade_password:e.input.password_1}).then(function(n){i.hide(),n.code==u.request.SUCCESS&&n.status==u.response.SUCCESS?(r.autoHide(n.message),o(function(){t.back()},3e3)):(e.input.password="",e.input.password_1="",e.input.password_2="",r.autoHide(n.message))}),void 0)}}]),angular.module("Game").controller("modifyPasswordController",["$scope","$rootScope","$location","$timeout","userServices","errorServices","toastServices","localStorageService","config",function(e,t,n,o,a,r,i,s,u){e.input={},e.ajaxForm=function(){return e.password_1!=e.password_2?(r.autoHide("两次密码不一致"),void 0):(i.show(),a.modify_password({old_password:e.input.password,new_password:e.input.password_1}).then(function(n){i.hide(),n.code==u.request.SUCCESS&&n.status==u.response.SUCCESS?(r.autoHide(n.message),o(function(){t.back()},3e3)):(e.input.password="",e.input.password_1="",e.input.password_2="",r.autoHide(n.message))}),void 0)}}]),angular.module("Game").controller("messagesController",["$scope","userServices","errorServices","toastServices","localStorageService","config",function(e,t,n,o,a,r){e.messages=[],e.page={pn:1,page_size:1,user_type:1,message:"点击加载更多"},e.loadMore=function(){e.no_more||(o.show(),e.page.message="正在加载...",t.query_messages(e.page).then(function(t){o.hide(),e.page.message="点击加载更多",t.code==r.request.SUCCESS&&t.status==r.response.SUCCESS?(e.messages=e.messages.concat(t.Result.MyInformationList.list),e.no_more=e.messages.length==t.Result.MyInformationList.totalRow?!0:!1):n.autoHide("服务器错误"),e.no_more&&(e.page.message="没有了"),e.page.pn++}))},e.loadMore()}]),angular.module("Game").controller("meController",["$scope","$rootScope","$location","userServices","gameExternalServices","errorServices","toastServices","localStorageService","config",function(e,t,n,o,a,r,i,s,u){i.show(),o.query_basicinfo().then(function(e){i.hide(),e.code==u.request.SUCCESS&&e.status==u.response.SUCCESS?t.user=angular.extend({},t.user,e.Result.UserInfo):r.autoHide(e.message)}),e.logout=function(){t.user={},s.remove("token"),n.path("index").replace()}}]),angular.module("Game").controller("liuhecaiController",["$scope","$route","$rootScope","$timeout","$interval","userServices","errorServices","toastServices","localStorageService","config",function(e,t,n,o,a,r,i,s,u,c){e.liuhecai={},e.liuhecai.waiting=!1,e.query_liuhecai=function(){r.query_liuhecai().then(function(t){return t.code==c.request.SUCCESS&&t.status==c.response.SUCCESS?e.liuhecai=t:i.autoHide(t.message),e.liuhecai.waiting?(o(function(){e.liuhecai.day_seconds="",e.query_liuhecai()},5e3),void 0):(e.reload_liuhecai_history(),void 0)})},e.query_liuhecai(),e.liuhecai_historys=[],e.page={pn:1,page_size:20,message:"点击加载更多"},e.loadMore=function(){e.no_more||(s.show(),e.page.message="正在加载...",r.query_liuhecai_history(e.page).then(function(t){s.hide(),e.page.message="点击加载更多",e.is_reload&&(e.liuhecai_historys=[],e.is_reload=!1),t.code==c.request.SUCCESS&&t.status==c.response.SUCCESS?(e.liuhecai_historys=e.liuhecai_historys.concat(t.Result.XglhcDataList.list),e.no_more=e.liuhecai_historys.length==t.Result.XglhcDataList.totalRow?!0:!1):i.autoHide("服务器错误"),e.no_more&&(e.page.message="没有了"),e.page.pn++}))},e.loadMore(),e.reload_liuhecai_history=function(){e.page={pn:1,page_size:20,message:"点击加载更多"},e.is_reload=!0,e.no_more=!1,e.loadMore()},e.callbackTimer={},e.callbackTimer.finished=function(){e.query_liuhecai()},e.refresh=function(){t.reload()},e.parse_code=function(e){return parseFloat(e)<10?"0"+e:e}}]),angular.module("Game").controller("kuaileController",["$scope","$route","$rootScope","$timeout","$interval","userServices","errorServices","toastServices","localStorageService","config",function(e,t,n,o,a,r,i,s,u,c){e.kuaile={},e.kuaile.waiting=!1,e.query_kuaile=function(){r.query_kuaile().then(function(t){return t.code==c.request.SUCCESS&&t.status==c.response.SUCCESS?e.kuaile=t:i.autoHide(t.message),e.kuaile.waiting?(o(function(){e.kuaile.day_seconds="",e.query_kuaile()},5e3),void 0):(e.reload_kuaile_history(),void 0)})},e.query_kuaile(),e.kuaile_historys=[],e.page={pn:1,page_size:20,message:"点击加载更多"},e.loadMore=function(){e.no_more||(s.show(),e.page.message="正在加载...",r.query_kuaile_history(e.page).then(function(t){s.hide(),e.page.message="点击加载更多",e.is_reload&&(e.kuaile_historys=[],e.is_reload=!1),t.code==c.request.SUCCESS&&t.status==c.response.SUCCESS?(e.kuaile_historys=e.kuaile_historys.concat(t.Result.Gdkl10DataList.list),e.no_more=e.kuaile_historys.length==t.Result.Gdkl10DataList.totalRow?!0:!1):i.autoHide("服务器错误"),e.no_more&&(e.page.message="没有了"),e.page.pn++}))},e.loadMore(),e.reload_kuaile_history=function(){e.page={pn:1,page_size:20,message:"点击加载更多"},e.is_reload=!0,e.no_more=!1,e.loadMore()},e.callbackTimer={},e.callbackTimer.finished=function(){e.query_kuaile()},e.refresh=function(){t.reload()}}]),angular.module("Game").controller("jiangpinController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Game").controller("indexController",["$scope","$rootScope","$timeout","$location","userServices","errorServices","gameServices","toastServices","localStorageService","config",function(e,t,n,o,a,r,i,s,u,c){s.show(),i.query_banner().then(function(t){s.hide(),t.code==c.request.SUCCESS&&t.status==c.response.SUCCESS?e.banners=t.Result.homeBanner:r.autoHide(t.message)}),e.preview_banner=function(e){o.path("banner_detail").search("id",e)},e.go=function(e){return u.get("token")?(o.path(e),void 0):(s.show(),r.autoHide("请先登录"),n(function(){o.path("signin")},1e3),void 0)}}]),angular.module("Game").controller("imagePreviewController",["$scope","$rootScope","$routeParams","errorServices","toastServices","localStorageService","config",function(e,t,n){e.preview_image=t.staticImageUrl+n.name}]),angular.module("Game").controller("imageGroupController",["$scope","gameServices","errorServices","toastServices","localStorageService","config",function(e,t,n,o,a,r){e.image_group=[],e.page={pn:1,page_size:20,message:"点击加载更多"},e.loadMore=function(){e.no_more||(o.show(),e.page.message="正在加载...",t.query_image_group(e.page).then(function(t){o.hide(),e.page.message="点击加载更多",t.code==r.request.SUCCESS&&t.status==r.response.SUCCESS?(e.image_group=e.image_group.concat(t.Result.ColorImageList.list),e.no_more=e.image_group.length==t.Result.ColorImageList.totalRow?!0:!1):n.autoHide("服务器错误"),e.no_more&&(e.page.message="没有了"),e.page.pn++}))},e.loadMore(),e.parse_time=function(e){var t=e.post_time.split(" ")[0];return t.replace(/(\d{4})-(\d{1,2})-(\d{1,2})/,"$1年$2月$3日")+" 第"+e.qishu+"期"}}]),angular.module("Game").controller("forgetController",["$scope","$location","$timeout","userServices","errorServices","toastServices","localStorageService","config",function(e,t,n,o,a,r,i,s){e.input={},e.ajaxForm=function(){return e.password_1!=e.password_2?(a.autoHide("两次密码不一致"),void 0):(r.show(),o.forget({nickname:e.input.nickname,telephone:e.input.telephone,password:e.input.password_1}).then(function(o){r.hide(),o.code==s.request.SUCCESS&&o.status==s.response.SUCCESS?(a.autoHide(o.message),n(function(){t.path("signin").replace()},3e3)):(e.input.nickname="",e.input.telephone="",e.input.password_1="",e.input.password_2="",a.autoHide(o.message))}),void 0)}}]),angular.module("Game").controller("fillinorderSaicheController",["$scope","$timeout","$route","userServices","$interval","errorServices","toastServices","localStorageService","config",function(e,t,n,o,a,r,i,s,u){e.input={},e.saiche={},e.saiche.waiting=!1,e.query_saiche=function(){o.query_saiche().then(function(n){return n.code==u.request.SUCCESS&&n.status==u.response.SUCCESS?e.saiche=n:r.autoHide(n.message),e.saiche.waiting?(t(function(){e.saiche.day_seconds="",e.query_saiche()
},5e3),void 0):void 0})},e.query_saiche(),e.game_type=[{label:"双面",value:"1"},{label:"数字盘",value:"2"}],e.input.game_type=e.game_type[0],e.$watch("input.game_type",function(t){t&&e.query_peilv(2)},!0),e.query_peilv=function(t){i.show(),o.query_peilv({g_type:t,o_type:e.input.game_type.value}).then(function(t){i.hide(),t.code==u.request.SUCCESS&&t.status==u.response.SUCCESS?(e.games=t.Result.OddsBeans,angular.forEach(e.games,function(e){angular.forEach(e.oIndexBeans,function(e){e.betting_money=0,e.betted=!1})})):r.autoHide(t.message)})},e.show=function(t,n){if(!e.saiche.waiting){if(t.betted)return t.betting_money=0,t.betted=!1,void 0;e.popup_state="open",e.input.selected_game_cell=t,e.input.selected_game=n}},e.close=function(){e.popup_state="close"},e.betting=function(){var t=/^[0-9]*$/;e.input.betting_money&&t.test(e.input.betting_money)&&(e.input.selected_game_cell.betting_money=e.input.betting_money,e.input.selected_game_cell.betted=!0,e.popup_state="close")},e.callbackTimer={},e.callbackTimer.finished=function(){e.query_saiche()},e.refresh=function(){n.reload()},e.resetForm=function(){e.saiche.waiting||angular.forEach(e.games,function(e){angular.forEach(e.oIndexBeans,function(e){e.betting_money=0,e.betted=!1})})},e.ajaxForm=function(){if(!e.saiche.waiting){var t="",n=0;angular.forEach(e.games,function(e,o){angular.forEach(e.oIndexBeans,function(e){if(e.betted){var a=o+1;n+=parseFloat(e.betting_money),t+=a+"A"+e.name+"A"+e.betting_money+"A"+e.rate+"#"}})}),t=t.substring(0,t.length-1),i.show(),o.betting({game_type:2,o_type:e.input.game_type.value,total_money:n,n_periods_next:e.saiche.qishu_next,buy_infos:t}).then(function(t){i.hide(),t.code==u.request.SUCCESS&&t.status==u.response.SUCCESS?(r.autoHide(t.message),e.resetForm()):r.autoHide(t.message)})}}}]),angular.module("Game").controller("fillinorderLiuhecaiController",["$scope","$route","$timeout","$route","userServices","$interval","errorServices","toastServices","localStorageService","config",function(e,t,n,t,o,a,r,i,s,u){e.input={},e.liuhecai={},e.liuhecai.waiting=!1,e.query_liuhecai=function(){o.query_liuhecai().then(function(t){return t.code==u.request.SUCCESS&&t.status==u.response.SUCCESS?e.liuhecai=t:r.autoHide(t.message),e.liuhecai.waiting?(n(function(){e.liuhecai.day_seconds="",e.query_liuhecai()},5e3),void 0):void 0})},e.query_liuhecai(),e.game_type=[{label:"特码",value:"1"},{label:"正码",value:"2"},{label:"半波",value:"3"},{label:"一肖/尾数",value:"4"},{label:"特码生肖",value:"5"},{label:"三中三",value:"6"},{label:"三中二",value:"7"},{label:"二中二",value:"8"}],e.input.game_type=e.game_type[0],e.$watch("input.game_type",function(t){t&&(e.is_board_open=!1,e.resetForm(),e.query_liuhecai_peilv(t.value))},!0),e.query_liuhecai_peilv=function(t){i.show(),o.query_liuhecai_peilv({g_type:t,o_type:e.input.game_type.value}).then(function(t){i.hide(),t.code==u.request.SUCCESS&&t.status==u.response.SUCCESS?(e.games=t.Result.OddsGdkl10Beans,angular.forEach(e.games,function(e){angular.forEach(e.oIndexBeans,function(e){e.betting_money=0,e.betted=!1})})):r.autoHide(t.message)})},e.show=function(t,n){if(!e.liuhecai.waiting){if(t.betted)return t.betting_money=0,t.betted=!1,void 0;e.popup_state="open",e.input.selected_game_cell=t,e.input.selected_game=n}},e.close=function(){e.popup_state="close"},e.betting=function(){var t=/^[0-9]*$/;!t.test(e.input.betting_money)||e.input.betting_money<1||(e.input.selected_game_cell.betting_money=parseFloat(e.input.betting_money),e.input.selected_game_cell.betted=!0,e.popup_state="close")},e.callbackTimer={},e.callbackTimer.finished=function(){e.query_liuhecai()},e.refresh=function(){t.reload()},e.parse_code=function(e){return parseFloat(e)<10?"0"+e:e},e.parse_code_1=function(e){return e.split("，").filter(function(e){return""!=e})},e.game_code=[];for(var c=1;50>c;c++)e.game_code.push({number:c,check:!1});e.toggle_board=function(){e.is_board_open=!e.is_board_open},e.caroms=[],e.check_list=[],e.check=function(t){var n=3;return 8==e.input.game_type.value&&(n=2),t.check?(t.check=!t.check,e.check_list=e.check_list.filter(function(e){return e!=t}),void 0):(t.check=!0,e.check_list.push(t),e.check_list.length>n-1&&(e.caroms.push({id:(new Date).getTime(),numbers:e.check_list,money:""}),e.check_list=[],e.game_code.map(function(e){return e.check=!1,e}),e.toggle_board()),void 0)},e.remove=function(t){e.caroms=e.caroms.filter(function(e){return e.id!=t.id})},e.resetForm=function(){return e.liuhecai.waiting?void 0:e.input.game_type.value<6?(angular.forEach(e.games,function(e){angular.forEach(e.oIndexBeans,function(e){e.betting_money=0,e.betted=!1})}),void 0):(e.input.game_type.value>5&&(e.caroms=[]),void 0)},e.ajaxForm=function(){if(!e.liuhecai.waiting){var t="",n=0;if(e.input.game_type.value<6){var a=e.query_1_5_buyinfos();t=a.buy_infos,n=a.total_money}if(e.input.game_type.value>5){var a=e.query_6_8_buyinfos();t=a.buy_infos,n=a.total_money}i.show(),o.betting_liuhecai({game_type:4,o_type:e.input.game_type.value,total_money:n,n_periods_next:e.liuhecai.qishu_next,buy_infos:t}).then(function(t){i.hide(),t.code==u.request.SUCCESS&&t.status==u.response.SUCCESS?(r.autoHide(t.message),e.resetForm()):r.autoHide(t.message)})}},e.query_1_5_buyinfos=function(){var t="",n=0;return angular.forEach(e.games,function(o){angular.forEach(o.oIndexBeans,function(o){o.betted&&(n+=parseFloat(o.betting_money),t+=e.input.game_type.value+"A"+o.name+"A"+o.betting_money+"A"+o.rate+"#")})}),t=t.substring(0,t.length-1),{buy_infos:t,total_money:n}},e.query_6_8_buyinfos=function(){var t="",n=0;return angular.forEach(e.caroms,function(o){n+=parseFloat(o.money);var a=o.numbers.map(function(e){return e.number<10?"0"+e.number:e.number}).join("B");t+=e.input.game_type.value+"A"+a+"A"+o.money+"A"+e.games[0].oIndexBeans[0].rate+"#"}),t=t.substring(0,t.length-1),{buy_infos:t,total_money:n}}}]),angular.module("Game").controller("fillinorderKuaileController",["$scope","$route","$timeout","$route","userServices","$interval","errorServices","toastServices","localStorageService","config",function(e,t,n,t,o,a,r,i,s,u){e.input={},e.kuaile={},e.kuaile.waiting=!1,e.query_kuaile=function(){o.query_kuaile().then(function(t){return t.code==u.request.SUCCESS&&t.status==u.response.SUCCESS?e.kuaile=t:r.autoHide(t.message),e.kuaile.waiting?(n(function(){e.kuaile.day_seconds="",e.query_kuaile()},5e3),void 0):void 0})},e.query_kuaile(),e.game_type=[{label:"双面",value:"1"},{label:"数字盘",value:"2"}],e.input.game_type=e.game_type[0],e.$watch("input.game_type",function(t){t&&e.query_kuaile_peilv(3)},!0),e.query_kuaile_peilv=function(t){i.show(),o.query_kuaile_peilv({g_type:t,o_type:e.input.game_type.value}).then(function(t){i.hide(),t.code==u.request.SUCCESS&&t.status==u.response.SUCCESS?(e.games=t.Result.OddsGdkl10Beans,angular.forEach(e.games,function(e){angular.forEach(e.oIndexBeans,function(e){e.betting_money=0,e.betted=!1})})):r.autoHide(t.message)})},e.show=function(t,n){if(!e.kuaile.waiting){if(t.betted)return t.betting_money=0,t.betted=!1,void 0;e.popup_state="open",e.input.selected_game_cell=t,e.input.selected_game=n}},e.close=function(){e.popup_state="close"},e.betting=function(){var t=/^[0-9]*$/;e.input.betting_money&&t.test(e.input.betting_money)&&(e.input.selected_game_cell.betting_money=e.input.betting_money,e.input.selected_game_cell.betted=!0,e.popup_state="close")},e.callbackTimer={},e.callbackTimer.finished=function(){e.query_kuaile()},e.refresh=function(){t.reload()},e.resetForm=function(){e.kuaile.waiting||angular.forEach(e.games,function(e){angular.forEach(e.oIndexBeans,function(e){e.betting_money=0,e.betted=!1})})},e.ajaxForm=function(){if(!e.kuaile.waiting){var t="",n=0,a="1"==e.input.game_type.value?"0":"1";angular.forEach(e.games,function(e,o){angular.forEach(e.oIndexBeans,function(e){if(e.betted){var r=parseFloat(o)+parseFloat(a);n+=parseFloat(e.betting_money),t+=r+"A"+e.name+"A"+e.betting_money+"A"+e.rate+"#"}})}),t=t.substring(0,t.length-1),i.show(),o.betting_kuaile({game_type:3,o_type:e.input.game_type.value,total_money:n,n_periods_next:e.kuaile.qishu_str,buy_infos:t}).then(function(t){i.hide(),t.code==u.request.SUCCESS&&t.status==u.response.SUCCESS?(r.autoHide(t.message),e.resetForm()):r.autoHide(t.message)})}}}]),angular.module("Game").controller("fillinorderFeitingController",["$scope","$route","$timeout","$route","userServices","$interval","errorServices","toastServices","localStorageService","config",function(e,t,n,t,o,a,r,i,s,u){e.input={},e.feiting={},e.feiting.waiting=!1,e.query_feiting=function(){o.query_feiting().then(function(t){return t.code==u.request.SUCCESS&&t.status==u.response.SUCCESS?e.feiting=t:r.autoHide(t.message),e.feiting.waiting?(n(function(){e.feiting.day_seconds="",e.query_feiting()},5e3),void 0):void 0})},e.query_feiting(),e.game_type=[{label:"双面",value:"1"},{label:"数字盘",value:"2"}],e.input.game_type=e.game_type[0],e.$watch("input.game_type",function(t){t&&e.query_peilv(1)},!0),e.query_peilv=function(t){i.show(),o.query_peilv({g_type:t,o_type:e.input.game_type.value}).then(function(t){i.hide(),t.code==u.request.SUCCESS&&t.status==u.response.SUCCESS?(e.games=t.Result.OddsBeans,angular.forEach(e.games,function(e){angular.forEach(e.oIndexBeans,function(e){e.betting_money=0,e.betted=!1})})):r.autoHide(t.message)})},e.show=function(t,n){if(!e.feiting.waiting){if(t.betted)return t.betting_money=0,t.betted=!1,void 0;e.popup_state="open",e.input.selected_game_cell=t,e.input.selected_game=n}},e.close=function(){e.popup_state="close"},e.betting=function(){var t=/^[0-9]*$/;e.input.betting_money&&t.test(e.input.betting_money)&&(e.input.selected_game_cell.betting_money=e.input.betting_money,e.input.selected_game_cell.betted=!0,e.popup_state="close")},e.callbackTimer={},e.callbackTimer.finished=function(){e.query_feiting()},e.refresh=function(){t.reload()},e.resetForm=function(){e.feiting.waiting||angular.forEach(e.games,function(e){angular.forEach(e.oIndexBeans,function(e){e.betting_money=0,e.betted=!1})})},e.ajaxForm=function(){if(!e.feiting.waiting){var t="",n=0;angular.forEach(e.games,function(e,o){angular.forEach(e.oIndexBeans,function(e){if(e.betted){var a=o+1;n+=parseFloat(e.betting_money),t+=a+"A"+e.name+"A"+e.betting_money+"A"+e.rate+"#"}})}),t=t.substring(0,t.length-1),i.show(),o.betting({game_type:1,o_type:e.input.game_type.value,total_money:n,n_periods_next:e.feiting.qishu_str,buy_infos:t}).then(function(t){i.hide(),t.code==u.request.SUCCESS&&t.status==u.response.SUCCESS?(r.autoHide(t.message),e.resetForm()):r.autoHide(t.message)})}}}]),angular.module("Game").controller("fillinorderController",["$scope","$timeout","$route","$routeParams","userServices","$interval","errorServices","toastServices","localStorageService","config",function(e,t,n,o,a,r,i,s,u,c){e.input={},e.query_feiting=function(){a.query_feiting().then(function(n){return n.code==c.request.SUCCESS&&n.status==c.response.SUCCESS?e.feiting=n:i.autoHide(n.message),e.feiting.waiting?(t(function(){e.feiting.day_seconds="",e.query_feiting()},5e3),void 0):void 0})},e.query_feiting(),e.game_type=[{label:"双面",value:"1"},{label:"数字盘",value:"2"}],e.input.game_type=e.game_type[0],e.$watch("input.game_type",function(t){t&&e.query_peilv(o.type||1)},!0),e.query_peilv=function(t){s.show(),a.query_peilv({g_type:t,o_type:e.input.game_type.value}).then(function(t){s.hide(),t.code==c.request.SUCCESS&&t.status==c.response.SUCCESS?(e.games=t.Result.OddsBeans,angular.forEach(e.games,function(e){angular.forEach(e.oIndexBeans,function(e){e.betting_money=0,e.betted=!1})})):i.autoHide(t.message)})},e.show=function(t,n){return t.betted?(t.betting_money=0,t.betted=!1,void 0):(e.popup_state="open",e.input.selected_game_cell=t,e.input.selected_game=n,void 0)},e.close=function(){e.popup_state="close"},e.betting=function(){var t=/^[0-9]*$/;e.input.betting_money&&t.test(e.input.betting_money)&&(e.input.selected_game_cell.betting_money=e.input.betting_money,e.input.selected_game_cell.betted=!0,e.popup_state="close")},e.resetForm=function(){angular.forEach(e.games,function(e){angular.forEach(e.oIndexBeans,function(e){e.betting_money=0,e.betted=!1})})},e.ajaxForm=function(){var r="",u=0;angular.forEach(e.games,function(e,t){angular.forEach(e.oIndexBeans,function(e){if(e.betted){var n=t+1;u+=parseFloat(e.betting_money),r+=n+"A"+e.name+"A"+e.betting_money+"A"+e.rate+"#"}})}),r=r.substring(0,r.length-1),s.show(),a.betting({game_type:o.type||1,o_type:e.input.game_type.value,total_money:u,n_periods_next:e.feiting.qishu_next,buy_infos:r}).then(function(e){s.hide(),e.code==c.request.SUCCESS&&e.status==c.response.SUCCESS?(i.autoHide(e.message),t(function(){n.reload()},3e3)):i.autoHide(e.message)})}}]),angular.module("Game").controller("feitingController",["$scope","$route","$rootScope","$timeout","$interval","userServices","errorServices","toastServices","localStorageService","config",function(e,t,n,o,a,r,i,s,u,c){e.feiting={},e.feiting.waiting=!1,e.query_feiting=function(){r.query_feiting().then(function(t){return t.code==c.request.SUCCESS&&t.status==c.response.SUCCESS?e.feiting=t:i.autoHide(t.message),e.feiting.waiting?(o(function(){e.feiting.day_seconds="",e.query_feiting()},5e3),void 0):(e.reload_feiting_history(),void 0)})},e.query_feiting(),e.feiting_historys=[],e.page={pn:1,page_size:20,message:"点击加载更多"},e.loadMore=function(){e.no_more||(s.show(),e.page.message="正在加载...",r.query_feiting_history(e.page).then(function(t){s.hide(),e.page.message="点击加载更多",e.is_reload&&(e.feiting_historys=[],e.is_reload=!1),t.code==c.request.SUCCESS&&t.status==c.response.SUCCESS?(e.feiting_historys=e.feiting_historys.concat(t.Result.XyftDataList.list),e.no_more=e.feiting_historys.length==t.Result.XyftDataList.totalRow?!0:!1):i.autoHide("服务器错误"),e.no_more&&(e.page.message="没有了"),e.page.pn++}))},e.loadMore(),e.reload_feiting_history=function(){e.page={pn:1,page_size:20,message:"点击加载更多"},e.is_reload=!0,e.no_more=!1,e.loadMore()},e.callbackTimer={},e.callbackTimer.finished=function(){e.query_feiting()},e.refresh=function(){t.reload()}}]),angular.module("Game").controller("exchangeController",["$scope","errorServices","toastServices","localStorageService","config",function(e){e.input={},e.input.province="广东省",e.input.city="深圳市",e.input.district="宝安区"}]),angular.module("Game").controller("detailController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Game").controller("contactController",["$scope","userServices","errorServices","toastServices","localStorageService","config",function(e,t,n,o,a,r){e.input={},o.show(),t.query_constant_info().then(function(t){o.hide(),t.code==r.request.SUCCESS&&t.status==r.response.SUCCESS?e.constant_info=t.Constant:n.autoHide(t.message)})}]),angular.module("Game").controller("chargeController",["$scope","$rootScope","userServices","errorServices","toastServices","localStorageService","config",function(e,t,n){n.sync()}]),angular.module("Game").controller("billsController",["$scope","userServices","errorServices","toastServices","localStorageService","config",function(e,t,n,o,a,r){e.bills=[],e.page={pn:1,page_size:20,message:"点击加载更多"},e.loadMore=function(){e.no_more||(o.show(),e.page.message="正在加载...",t.query_bills(e.page).then(function(t){o.hide(),e.page.message="点击加载更多",t.code==r.request.SUCCESS&&t.status==r.response.SUCCESS?(e.bills=e.bills.concat(t.Result.FundLogList.list),e.no_more=e.bills.length==t.Result.FundLogList.totalRow?!0:!1):n.autoHide("服务器错误"),e.no_more&&(e.page.message="没有了"),e.page.pn++}))},e.loadMore(),e.type=["","存款","提现","投注","中奖","推荐收入"],e.get_type=function(t){return e.type[t]}}]),angular.module("Game").controller("bannerDetailController",["$scope","$sce","$routeParams","gameServices","errorServices","toastServices","localStorageService","config",function(e,t,n){var o="http://120.76.41.192:8055/app/IndexBannerManage/indexBannerDetail?index_banner_id="+n.id;e.trust_resource=t.trustAsResourceUrl(o)}]),angular.module("Game").constant("config",{url:"http://120.76.41.192:8055",imageUrl:"http://120.76.41.192:8055/files/image?name=",request:{SUCCESS:"200",TOKEN_INVALID:"405"},response:{SUCCESS:1},common_params:{invoke:"h5"},interceptor:["index","feiting","saiche","kuaile","liuhecai","jiangpin","contact","charge","me","bills","recommandors","recommand_income","my_code","forget","modify_password","modify_trade_password","messages","online_charge","online_withdraw","fillinorder","detail","exchange","orders","signin","signup","fillinorder_feiting","fillinorder_saiche","fillinorder_kuaile","fillinorder_liuhecai","banner_detail","image_group","image_preview"]});
//# sourceMappingURL=app.min.js.map
